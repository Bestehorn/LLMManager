{
  "enabled": true,
  "name": "Run Full CI Workflow",
  "description": "Manually trigger full CI checks including all quality, security, and test steps",
  "version": "1",
  "when": {
    "type": "manual"
  },
  "then": {
    "type": "askAgent",
    "prompt": "Execute the full CI workflow:\n\n1. **Verify Virtual Environment**: Confirm that the virtual environment is activated. If not, activate it using: venv\\Scripts\\activate\n\n2. **Code Formatting Checks**:\n   - Run black check: venv\\Scripts\\activate & black src/ test/ scripts/ --check --extend-exclude=\"src/bestehorn_llmmanager/_version.py\"\n   - If formatting issues found, fix them: venv\\Scripts\\activate & black src/ test/ scripts/ --extend-exclude=\"src/bestehorn_llmmanager/_version.py\"\n   - Line length: 100 characters (project-specific)\n\n3. **Import Sorting Checks**:\n   - Run isort check: venv\\Scripts\\activate & isort src/ test/ scripts/ --check-only --skip=\"src/bestehorn_llmmanager/_version.py\"\n   - If issues found, fix them: venv\\Scripts\\activate & isort src/ test/ scripts/ --skip=\"src/bestehorn_llmmanager/_version.py\"\n   - Profile: black\n\n4. **Linting Checks**:\n   - Run flake8: venv\\Scripts\\activate & flake8 src/ test/ scripts/ --max-line-length=100 --extend-ignore=E203,W503 --exclude=\"src/bestehorn_llmmanager/_version.py\"\n   - Fix any linting issues found manually\n   - Common issues to watch for:\n     * Unused imports\n     * Undefined variables\n     * Line too long (>100 characters)\n     * Trailing whitespace\n\n5. **Type Checking**:\n   - Run mypy: venv\\Scripts\\activate & mypy --exclude=\"_version\" src/\n   - Fix any type errors found:\n     * Missing type hints\n     * Type mismatches\n     * Incompatible return types\n     * Missing imports in type stubs\n\n6. **Security Scanning**:\n   - Run bandit: venv\\Scripts\\activate & bandit -r src/ scripts/ -x \"src/bestehorn_llmmanager/_version.py\"\n   - Review and fix any security issues found:\n     * Hardcoded passwords or secrets\n     * SQL injection vulnerabilities\n     * Use of insecure functions\n     * Potential command injection\n   - If warnings are acceptable, document why\n\n7. **Test Execution**:\n   - Run full test suite with coverage: venv\\Scripts\\activate & pytest test/ --cov=src/bestehorn_llmmanager --cov-report=term-missing --cov-fail-under=80\n   - Fix any failing tests:\n     * Analyze the failure\n     * Determine if it's a code bug or test bug\n     * Fix the root cause\n     * Re-run tests\n   - Ensure coverage meets threshold (80%)\n   - If coverage below threshold, add tests for uncovered code\n\n8. **Report Results**: Provide summary of all checks with pass/fail status:\n   - Black formatting: [PASS/FAIL] - [issues found and fixed]\n   - Isort import sorting: [PASS/FAIL] - [issues found and fixed]\n   - Flake8 linting: [PASS/FAIL] - [number of issues, types of issues]\n   - Mypy type checking: [PASS/FAIL] - [number of errors, types of errors]\n   - Bandit security: [PASS/FAIL] - [number of issues, severity levels]\n   - Pytest tests: [PASS/FAIL] - [pass/fail counts, coverage percentage]\n   - Overall status: [ALL PASS / ISSUES REMAINING]\n   - Any remaining issues that need attention\n\n**Project-Specific Configuration**:\n- Line length: 100 characters (not 120)\n- Always exclude: src/bestehorn_llmmanager/_version.py (auto-generated)\n- Coverage target: 80% minimum\n- Windows activation: venv\\Scripts\\activate\n- Package name: bestehorn-llmmanager\n- Source directory: src/bestehorn_llmmanager/\n\n**CRITICAL**: Repeat steps until all checks pass. Do not proceed if any critical issues remain. All tests must pass and coverage must meet 80% threshold before considering the workflow complete."
  }
}
